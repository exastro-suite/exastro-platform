<!--
#   Copyright 2024 NEC Corporation
#
#   Licensed under the Apache License, Version 2.0 (the "License");
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.
-->
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="format-detection" content="telephone=no,email=no,address=no">
        <meta name="theme-color" content="#002B62">
        <title text-id="000-93024">
            サービスアカウントユーザートークン発行 / サービスアカウント管理 / Exastro Platform
        </title>
        <link rel="stylesheet" href="/_/platform-commons/css/platform.css?ver=__BUILD_VERSION__">

        <script type="text/javascript" src="/auth/js/keycloak.js?ver=__BUILD_VERSION__"></script>
        <script type="text/javascript" src="/_/common-auth/js/exastro-common-auth-config.js?ver=__BUILD_VERSION__"></script>
        <script type="text/javascript" src="/_/common-auth/js/exastro-common-auth.js?ver=__BUILD_VERSION__"></script>
        <script src="/_/platform-commons/common/js/jquery.js?ver=__BUILD_VERSION__"></script>

        <link rel="stylesheet" href="/_/platform-commons/css/custom_properties.css?ver=__BUILD_VERSION__">
        <link rel="stylesheet" href="/_/platform-commons/css/common.css?ver=__BUILD_VERSION__">
        <link rel="stylesheet" href="/_/platform-commons/css/dialog.css?ver=__BUILD_VERSION__">

        <script src="/_/platform-commons/common/js/words.js?ver=__BUILD_VERSION__"></script>
        <script src="/_/platform-commons/common/js/common.js?ver=__BUILD_VERSION__"></script>
        <script src="/_/platform-commons/common/js/dialog.js?ver=__BUILD_VERSION__"></script>
        <script src="/_/platform-commons/common/js/ui.js?ver=__BUILD_VERSION__"></script>

        <script src="/_/platform-commons/js/platform_common.js?ver=__BUILD_VERSION__"></script>
        <script src="/_/platform-commons/js/uri_conf.js?ver=__BUILD_VERSION__"></script>
        <script src="/_/platform-commons/js/service_account_user_token.js?ver=__BUILD_VERSION__"></script>

    </head>
    <body>
        <div id="container">
            <div class="containerHeader">
                <header id="header">
                    <div class="logo">
                        <img class="logoImage" src="/_/platform-commons/img/Exastro-logo2-white-rgb.svg" alt="Exastro" style="height:32px; margin:5px 18px;">
                    </div>
                    <div class="topicPath">
                        <ol class="topichPathList" style="visibility:hidden;">
                        </ol>
                    </div>
                    <div class="headerMenu">
                        <ul class="headerMenuList">
                            <li class="userInfomation headerMenuItem">
                            </li>
                        </ul>
                    </div>
                </header>
            </div>
            <div class="containerBody">
                <aside id="menu" class="">
                    <div class="menuBody">
                        <nav class="menuNavi">
                            <ul class="menuList" style="display:none;">
                            </ul>
                        </nav>
                    </div>
                </aside>
                <main id="main" style="visibility:hidden;">
                    <div id="content">
                        <div class="contentHeader">
                            <h1 class="contentTitle"><span class="contentTitleInner" text-id="000-93023">サービスアカウントユーザートークン発行</span></h1>
                            <p class="contentMenuInfo" text-id="000-93025">サービスアカウントユーザー用のトークンの発行が行えます</p>
                        </div>
                        <div class="contentBody">
                            <div class="contentMenu">
                                <ul class="contentMenuList">
                                    <li class="contentMenuItem">
                                        <a class="contentMenuLink tabOpen" href="#token_manage" tabindex="-1">
                                            <span class="inner" text-id="000-81004">トークン発行</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <section class="section tabOpen" id="token_manage">
                                <div class="sectionBody">
                                    <div id="MT" class="tableContainer viewTable">
                                        <div class="tableHeader">
                                            <ul class="tableHeaderMainMenuList">
                                                <li class="operationMenuItem">
                                                    <button id="button_token_issuance" data-action="positive" class="itaButton tableHeaderMainMenuButton button" style="width:200px;">
                                                        <span class="inner">
                                                            <span class="iconButtonIcon icon icon-plus"></span>
                                                            <span class="iconButtonBody" text-id="000-80034">発行</span>
                                                        </span>
                                                    </button>
                                                </li>
                                                <li class="operationMenuItem">
                                                    <button id="button_delete_modal_open" data-action="danger" class="itaButton tableHeaderMainMenuButton button" style="width:200px;">
                                                        <span class="inner">
                                                            <span class="iconButtonIcon icon icon-trash"></span>
                                                            <span class="iconButtonBody" text-id="000-80010">削除</span>
                                                        </span>
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>

                                        <div class="tableBody">
                                            <table class="table" width="100%" id="token_list">
                                                <thead class="thead">
                                                    <tr class="tHeadTr tr">
                                                        <th class="tHeadLeftSticky tHeadTh popup th" rowspan="1" colspan="1" }="" title="ID" attr-text-id="title=000-81008"><div class="ci" text-id="000-81008">ID</div></th>
                                                        <th class="tHeadTh popup th" rowspan="1" colspan="1" }="" title="発行日時" attr-text-id="title=000-81009"><div class="ci" text-id="000-81009">発行日時</div></th>
                                                        <th class="tHeadTh popup th" rowspan="1" colspan="1" }="" title="発行ユーザー名" attr-text-id="title=000-93026"><div class="ci" text-id="000-93026">発行ユーザー名</div></th>
                                                        <th class="tHeadTh popup th" rowspan="1" colspan="1" }="" title="有効期限" attr-text-id="title=000-81010"><div class="ci" text-id="000-81010">有効期限</div></th>
                                                        <th class="tHeadTh popup th" rowspan="1" colspan="1" }="" title="最終アクセス日時" attr-text-id="title=000-81011"><div class="ci" text-id="000-81011">最終アクセス日時</div></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="tbody">
                                                    <tr class="tBodyTr tr datarow-template" style="display:none" data-id="${id}">
                                                        <th class="tBodyLeftSticky tBodyTh th" rowspan="1" colspan="1" }="" ><div class="ci" style="text-align: center;">${id}</div></td>
                                                        <td class="tBodyTd td" rowspan="1" colspan="1" }="" ><div class="ci" style="text-align: center;">${start_timestamp}</div></td>
                                                        <td class="tBodyTd td" rowspan="1" colspan="1" }="" ><div class="ci" style="text-align: center;">${create_user_name}</div></td>
                                                        <td class="tBodyTd td" rowspan="1" colspan="1" }="" ><div class="ci" style="text-align: center;">${expire_timestamp}</div></td>
                                                        <td class="tBodyTd td" rowspan="1" colspan="1" }="" ><div class="ci" style="text-align: center;">${lastaccess_timestamp}</div></td>
                                                    </tr>
                                                    <tr class="tBodyTr tr notfound" style="display:none">
                                                        <td class="tBodyLeftSticky tBodyTh th" rowspan="1" colspan="5" }="" height="50px"><div class="ci" style="text-align: center;" text-id="000-81012">
                                                            有効なrefresh tokenは存在しません
                                                        </div></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </main>
            </div>
            <div class="containerLoading"></div>
        </div>
        <!--
            Dialog
        -->
        <div class="dialog-template" style="display: none">
            <div id="create_token_result_dialog">
                <div class="alertMessage" style="margin-left: 30px; margin-right: 30px;">
                    <span text-id="000-81016">
                        refresh tokenの発行に成功しました。
                    </span><br>
                    <span text-id="000-81017">
                        発行したrefresh tokenはこの画面を閉じると二度と表示されませんので大切に保管してください。
                    </span><br>
                    <textarea style="width:50vw;" rows="6" readonly>{refresh_token}</textarea><br>
                    <span class="caution_head" text-id="000-80053">注意</span><br>
                    <span class="caution_message" text-id="000-93027">発行したrefresh tokenの有効期限は{expiration_date}です。</span>
                    <div class="copy_message"><br></div>
                </div>
            </div>
        </div>
    </body>
</html>
