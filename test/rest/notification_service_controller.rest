# not quate strings
@sys-user-id = admin
@sys-user-pw = password
@org-user-id = admin
@org-user-pw = password
@base_sys_url = http://platform-auth:{{sys-mng-port}}
@base_org_url = http://platform-auth:{{org-mng-port}}

# share org_id (同じものを複数記載すると最後の設定値が渡される)
@org_id = org1

# share ws_id (同じものを複数記載すると最後の設定値が渡される)
@ws_id = ws1

# 1 api to ### 


### Get Notification
GET {{base_org_url}}/api/{{org_id}}/platform/workspaces/{{ws_id}}/settings/notifications
Authorization: Basic {{org-user-id}} {{org-user-pw}}

### Create Notifications(kind=mail)
POST {{base_org_url}}/api/{{org_id}}/platform/workspaces/{{ws_id}}/settings/notifications
Authorization: Basic {{org-user-id}} {{org-user-pw}}
content-type: application/json

[
  {
    "id": "destination-mail-01",
    "name": "name of mail destination",
    "kind": "Mail",
    "destination_informations": [{
        "address_header": "to",
        "email": "example@example.com"
    }],
    "conditions": {
        "ita.event_type.new": true,
        "ita.event_type.evaluated": false,
        "ita.event_type.time_out": true,
        "ita.event_type.undetected": false
    }
  }
]


### Create Notifications(kind=teams)
POST {{base_org_url}}/api/{{org_id}}/platform/workspaces/{{ws_id}}/settings/notifications
Authorization: Basic {{org-user-id}} {{org-user-pw}}
content-type: application/json

[
  {
    "id": "destination-teams-01",
    "name": "name of teams destination",
    "kind": "Teams",
    "destination_informations": [{
      "webhook": "https://example.com/teams"
    }],
    "conditions": {
        "ita.event_type.new": true,
        "ita.event_type.evaluated": false,
        "ita.event_type.time_out": true,
        "ita.event_type.undetected": false
    }
  }
]


### Register for message notifications
POST {{base_org_url}}/api/{{org_id}}/platform/workspaces/{{ws_id}}/notifications
Authorization: Basic {{org-user-id}} {{org-user-pw}}
content-type: application/json

[
  {
    "destination_id": "A0000001Z7ZXFAED6872F6C9W8",
    "func_id": "00000000",
    "func_informations": {
      "key-1": "value-1",
      "key-2": "value-2"
    },
    "message": {
      "title": "subjects",
      "message": "event message"
    }
  }
]


### Get Notification Desiti

@dest_id = destination-mail-01
GET {{base_org_url}}/api/{{org_id}}/platform/workspaces/{{ws_id}}/settings/notifications/{{dest_id}}
Authorization: Basic {{org-user-id}} {{org-user-pw}}